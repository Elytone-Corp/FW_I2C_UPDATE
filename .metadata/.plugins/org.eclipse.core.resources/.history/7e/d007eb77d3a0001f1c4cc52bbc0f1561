

/*Script - i2c_driver.c*/
// by:-  Ashutosh tiwari



#include "i2c_driver.h"
#include "mxc_device.h"
#include "mxc_delay.h"
#include "i2c.h"
#include <string.h>
#include <stdio.h>

#define I2C_SLAVE_ADDR  0x55
#define I2C_FREQ 		100000
#define I2C_TIMEOUT_MS  1000

static volatile int i2c_async_flag = 0;

static void i2c_callback(mxc_i2c_req_t *req, int error) {
	if (error != E_NO_ERROR) {
		printf("I2C Callback Error: %d\n", error);
	}
	i2c_async_flag = 1;
}

void I2C_Slave_Init(void) {
	int ret = MXC_I2C_Init(MXC_I2C1, I2C_FREQ);
	if (ret != E_NO_ERROR) {
		printf("I2C Init Error: %d\n", ret);
		return;
	}

	MXC_I2C_SetFrequency(MXC_I2C1, I2C_FREQ);
	MXC_I2C_SetSlaveAddr(MXC_I2C1, I2C_SLAVE_ADDR, 0);
	MXC_I2C_EnableInt(MXC_I2C1, MXC_I2C_INT_EN0_DONE);

}
