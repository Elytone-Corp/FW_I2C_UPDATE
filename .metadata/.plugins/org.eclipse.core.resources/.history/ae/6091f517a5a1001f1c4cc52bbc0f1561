


/*Script - state_manager.h*/
// by:-  Ashutosh tiwari


#include "state_manager.h"
#include <stdio.h>

// Define static variable to hold current state
static bootloader_state_t current_state = STATE_BOOT;

void StateManager_Init(void) {
    // Initialize state to STATE_BOOT
    current_state = STATE_BOOT;
    printf("[State Manager] Initialized to STATE_BOOT.\n");
}

void StateManager_SetState(bootloader_state_t state) {
    if (state < STATE_BOOT || state > STATE_ERROR) {
        printf("[State Manager] Invalid state transition attempted.\n");
        return;
    }

    printf("[State Manager] Transitioning to state: %d\n", state);
    current_state = state;  // Correctly setting static variable
}

bootloader_state_t StateManager_GetState(void) {
    return current_state;  // Accessing static variable
}

bool StateManager_IsInState(bootloader_state_t state) {
    return current_state == state;  // Comparing with static variable
}
